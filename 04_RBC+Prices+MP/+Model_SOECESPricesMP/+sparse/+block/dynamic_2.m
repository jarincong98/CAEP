function [y, T, residual, g1] = dynamic_2(y, x, params, steady_state, sparse_rowval, sparse_colval, sparse_colptr, T)
residual=NaN(21, 1);
  y(76)=y(77);
  y(68)=y(58)*y(48);
  y(69)=y(68)*4;
  T(5)=params(10)*(y(52)/y(48))^params(8);
  T(6)=y(83)^(params(8)-1);
  y(59)=y(46)*T(5)*T(6);
  T(7)=(1-params(10))*(y(52)/y(49))^params(8);
  y(60)=T(6)*y(46)*T(7);
  T(8)=params(11)*(y(55)/y(48))^params(9);
  T(9)=y(84)^(params(8)-1);
  y(61)=y(51)*T(8)*T(9);
  y(65)=y(49)*y(71);
  y(54)=(y(53)*y(47)/params(4))^(1/params(5));
  y(63)=(y(50)*y(80)/y(48))^params(12)*y(85);
  y(64)=y(48)*y(63);
  y(66)=y(64)-y(65);
  T(10)=1/y(81)*(y(56)/params(7))^params(7);
  T(11)=(y(47)/(1-params(7)))^(1-params(7));
  residual(1)=(y(77))-(T(10)*T(11));
  T(12)=params(3)*(y(90)/y(46))^(-params(1));
  T(13)=(y(92)/y(48))^2;
  residual(2)=(y(77)*params(23)/y(48))-(params(23)-1+y(48)*params(19)*(y(48)/y(4)-1)/y(4)-params(19)*T(12)*(y(92)/y(48)-1)*T(13)*y(102)/y(58));
  residual(3)=(y(58))-(y(72)+y(59)+y(61)+y(63));
  T(14)=(1-params(11))*(y(55)/y(49))^params(9);
  residual(4)=(y(62))-(T(9)*y(51)*T(14));
  residual(5)=(y(73))-(params(20)/2*(y(49)/y(5)-1)^2);
  residual(6)=(y(71))-(y(73)+y(60)+y(62));
  residual(7)=(y(75)+y(66))-(y(50)*y(80)*y(67)+y(80)*y(50)*(-(1+y(13)))*y(23));
  residual(8)=(y(53)*y(50)*y(80))-(params(3)*y(97)*y(94)*y(124)*(1+y(57)));
  T(15)=exp(params(29)*(y(50)*y(80)*y(67)/y(69)-params(13)));
  residual(9)=(y(57))-(params(31)+T(15)-1);
  residual(10)=(y(86))-(params(35)*y(42)+(1-params(35))*params(32)+params(37)*(y(52)/params(34)-1)+params(36)*(y(68)/params(33)-1)+x(7));
  residual(11)=(y(72))-(params(19)/2*(y(48)/y(4)-1)^2);
  T(16)=(1/y(83))^(1-params(8));
  residual(12)=(y(52)^(1-params(8)))-(T(16)*(params(10)*y(48)^(1-params(8))+(1-params(10))*y(49)^(1-params(8))));
  residual(13)=(y(51))-(y(45)-(1-params(2))*y(1)+params(6)/2*(y(45)-y(1))^2);
  residual(14)=(y(53)*y(55)*(1+params(6)*(y(45)-y(1))))-(params(3)*y(97)*y(99)*(1-params(2)+params(6)*(y(89)-y(45))+y(100)/y(99)));
  residual(15)=(y(56))-(params(7)*y(76)*y(58)/y(1));
  residual(16)=(y(47))-(y(58)*(1-params(7))*y(76)/y(54));
  T(17)=y(46)^(-params(1));
  residual(17)=(y(53))-(T(17)/y(52));
  T(18)=params(11)*y(48)^(1-params(9))+(1-params(11))*y(49)^(1-params(9));
  residual(18)=(y(55))-(1/y(84)*T(18)^(1/(1-params(9))));
  T(19)=(y(93)/y(49))^2;
  residual(19)=(y(50)*y(82)*params(21)/y(49))-(params(21)-1+y(49)*params(20)*(y(49)/y(5)-1)/y(5)-T(12)*params(20)*(y(93)/y(49)-1)*T(19)*y(115)/y(71));
  residual(20)=(y(75))-(y(71)*(y(49)-y(50)*params(22))-y(71)*y(49)*y(73));
  residual(21)=(y(52)*y(53))-(params(3)*y(97)*y(96)*(1+y(86)));
  T(20)=getPowerDeriv(y(90)/y(46),(-params(1)),1);
  T(21)=getPowerDeriv(y(53)*y(47)/params(4),1/params(5),1);
  T(22)=getPowerDeriv(y(50)*y(80)/y(48),params(12),1);
  T(23)=getPowerDeriv(y(52)/y(48),params(8),1);
  T(24)=getPowerDeriv(y(55)/y(48),params(9),1);
  T(25)=getPowerDeriv(T(18),1/(1-params(9)),1);
  T(26)=getPowerDeriv(y(52)/y(49),params(8),1);
  T(27)=getPowerDeriv(y(55)/y(49),params(9),1);
if nargout > 3
    g1_v = NaN(104, 1);
g1_v(1)=(-(y(23)*y(80)*(-y(50))));
g1_v(2)=(-(y(80)*y(50)*(-(1+y(13)))));
g1_v(3)=(-params(35));
g1_v(4)=(-((y(4)*y(48)*params(19)*(-y(48))/(y(4)*y(4))-y(48)*params(19)*(y(48)/y(4)-1))/(y(4)*y(4))));
g1_v(5)=(-(params(19)/2*(-y(48))/(y(4)*y(4))*2*(y(48)/y(4)-1)));
g1_v(6)=(-(params(20)/2*(-y(49))/(y(5)*y(5))*2*(y(49)/y(5)-1)));
g1_v(7)=(-((y(5)*y(49)*params(20)*(-y(49))/(y(5)*y(5))-y(49)*params(20)*(y(49)/y(5)-1))/(y(5)*y(5))));
g1_v(8)=(-(params(6)/2*(-(2*(y(45)-y(1))))-(1-params(2))));
g1_v(9)=y(53)*y(55)*(-params(6));
g1_v(10)=(-((-(params(7)*y(76)*y(58)))/(y(1)*y(1))));
g1_v(11)=(-(T(10)*1/(1-params(7))*getPowerDeriv(y(47)/(1-params(7)),1-params(7),1)));
g1_v(12)=1-(-(y(58)*(1-params(7))*y(76)*y(53)/params(4)*T(21)))/(y(54)*y(54));
g1_v(13)=1;
g1_v(14)=params(23)/y(48);
g1_v(15)=(-(params(7)*y(58)/y(1)));
g1_v(16)=(-((1-params(7))*y(58)/y(54)));
g1_v(17)=(-1);
g1_v(18)=1;
g1_v(19)=(-(T(8)*T(9)));
g1_v(20)=(-(T(9)*T(14)));
g1_v(21)=1;
g1_v(22)=1;
g1_v(23)=(-1);
g1_v(24)=y(49)*y(71);
g1_v(25)=1;
g1_v(26)=(-1);
g1_v(27)=1;
g1_v(28)=1;
g1_v(29)=(-(params(3)*y(97)*y(94)*y(124)));
g1_v(30)=1;
g1_v(31)=(-(y(50)*y(80)));
g1_v(32)=(-(T(15)*params(29)*y(50)*y(80)/y(69)));
g1_v(33)=1;
g1_v(34)=(-(params(3)*y(97)*y(96)));
g1_v(35)=(-(y(77)*params(23)))/(y(48)*y(48))-((params(19)*(y(48)/y(4)-1)+y(48)*params(19)*1/y(4))/y(4)-y(102)*(T(13)*params(19)*T(12)*(-y(92))/(y(48)*y(48))+params(19)*T(12)*(y(92)/y(48)-1)*(-y(92))/(y(48)*y(48))*2*y(92)/y(48))/y(58));
g1_v(36)=(-(y(85)*(-(y(50)*y(80)))/(y(48)*y(48))*T(22)+T(6)*y(46)*params(10)*(-y(52))/(y(48)*y(48))*T(23)+T(9)*y(51)*params(11)*(-y(55))/(y(48)*y(48))*T(24)));
g1_v(37)=y(63)+y(48)*y(85)*(-(y(50)*y(80)))/(y(48)*y(48))*T(22);
g1_v(38)=(-(T(15)*params(29)*(-(y(50)*y(80)*y(67)*y(58)*4))/(y(69)*y(69))));
g1_v(39)=(-(params(36)*y(58)/params(33)));
g1_v(40)=(-(params(19)/2*2*(y(48)/y(4)-1)*1/y(4)));
g1_v(41)=(-(T(16)*params(10)*getPowerDeriv(y(48),1-params(8),1)));
g1_v(42)=(-(1/y(84)*params(11)*getPowerDeriv(y(48),1-params(9),1)*T(25)));
g1_v(43)=(-(T(9)*y(51)*(1-params(11))*(-y(55))/(y(49)*y(49))*T(27)));
g1_v(44)=(-(params(20)/2*2*(y(49)/y(5)-1)*1/y(5)));
g1_v(45)=(-(T(6)*y(46)*(1-params(10))*(-y(52))/(y(49)*y(49))*T(26)));
g1_v(46)=(-y(71));
g1_v(47)=(-(T(16)*(1-params(10))*getPowerDeriv(y(49),1-params(8),1)));
g1_v(48)=(-(1/y(84)*T(25)*(1-params(11))*getPowerDeriv(y(49),1-params(9),1)));
g1_v(49)=(-(y(50)*y(82)*params(21)))/(y(49)*y(49))-((params(20)*(y(49)/y(5)-1)+y(49)*params(20)*1/y(5))/y(5)-y(115)*(T(19)*T(12)*params(20)*(-y(93))/(y(49)*y(49))+T(12)*params(20)*(y(93)/y(49)-1)*(-y(93))/(y(49)*y(49))*2*y(93)/y(49))/y(71));
g1_v(50)=(-(y(71)-y(71)*y(73)));
g1_v(51)=(-(1+params(6)/2*2*(y(45)-y(1))));
g1_v(52)=params(6)*y(53)*y(55)-params(3)*y(97)*y(99)*(-params(6));
g1_v(53)=y(50)*y(80);
g1_v(54)=y(55)*(1+params(6)*(y(45)-y(1)));
g1_v(55)=(-((-(y(58)*(1-params(7))*y(76)*T(21)*y(47)/params(4)))/(y(54)*y(54))));
g1_v(56)=1;
g1_v(57)=y(52);
g1_v(58)=(-(T(11)*1/y(81)*1/params(7)*getPowerDeriv(y(56)/params(7),params(7),1)));
g1_v(59)=1;
g1_v(60)=(-(params(19)*T(12)*(y(92)/y(48)-1)*T(13)*y(102)))/(y(58)*y(58));
g1_v(61)=1;
g1_v(62)=(-(T(15)*params(29)*(-(y(50)*y(80)*y(67)*y(48)*4))/(y(69)*y(69))));
g1_v(63)=(-(params(36)*y(48)/params(33)));
g1_v(64)=(-(params(7)*y(76)/y(1)));
g1_v(65)=(-((1-params(7))*y(76)/y(54)));
g1_v(66)=y(102)*T(13)*(y(92)/y(48)-1)*params(19)*params(3)*(-y(90))/(y(46)*y(46))*T(20)/y(58);
g1_v(67)=(-(T(5)*T(6)));
g1_v(68)=(-(T(6)*T(7)));
g1_v(69)=(-(getPowerDeriv(y(46),(-params(1)),1)/y(52)));
g1_v(70)=y(115)*T(19)*(y(93)/y(49)-1)*params(20)*params(3)*(-y(90))/(y(46)*y(46))*T(20)/y(71);
g1_v(71)=(-(T(9)*y(51)*params(11)*T(24)*1/y(48)));
g1_v(72)=(-(T(9)*y(51)*(1-params(11))*T(27)*1/y(49)));
g1_v(73)=y(53)*(1+params(6)*(y(45)-y(1)));
g1_v(74)=1;
g1_v(75)=(-(y(85)*T(22)*y(80)/y(48)));
g1_v(76)=y(48)*y(85)*T(22)*y(80)/y(48)-(y(80)*y(67)+y(23)*y(80)*(-(1+y(13))));
g1_v(77)=y(53)*y(80);
g1_v(78)=(-(T(15)*params(29)*y(80)*y(67)/y(69)));
g1_v(79)=y(82)*params(21)/y(49);
g1_v(80)=(-(y(71)*(-params(22))));
g1_v(81)=1;
g1_v(82)=(-y(49));
g1_v(83)=(-(T(12)*params(20)*(y(93)/y(49)-1)*T(19)*y(115)))/(y(71)*y(71));
g1_v(84)=(-(y(49)-y(50)*params(22)-y(49)*y(73)));
g1_v(85)=(-(T(6)*y(46)*params(10)*T(23)*1/y(48)));
g1_v(86)=(-(T(6)*y(46)*(1-params(10))*T(26)*1/y(49)));
g1_v(87)=(-(params(37)*1/params(34)));
g1_v(88)=getPowerDeriv(y(52),1-params(8),1);
g1_v(89)=(-((-T(17))/(y(52)*y(52))));
g1_v(90)=y(53);
g1_v(91)=y(102)*(T(13)*params(19)*T(12)*1/y(48)+params(19)*T(12)*(y(92)/y(48)-1)*2*y(92)/y(48)*1/y(48))/y(58);
g1_v(92)=y(115)*(T(19)*T(12)*params(20)*1/y(49)+T(12)*params(20)*(y(93)/y(49)-1)*2*y(93)/y(49)*1/y(49))/y(71);
g1_v(93)=(-(params(6)*params(3)*y(97)*y(99)));
g1_v(94)=(-((1+y(57))*y(124)*params(3)*y(94)));
g1_v(95)=(-((1-params(2)+params(6)*(y(89)-y(45))+y(100)/y(99))*params(3)*y(99)));
g1_v(96)=(-((1+y(86))*params(3)*y(96)));
g1_v(97)=(-(params(3)*y(97)*y(99)*1/y(99)));
g1_v(98)=params(19)*T(12)*(y(92)/y(48)-1)*T(13)/y(58);
g1_v(99)=y(102)*T(13)*(y(92)/y(48)-1)*params(19)*params(3)*T(20)*1/y(46)/y(58);
g1_v(100)=y(115)*T(19)*(y(93)/y(49)-1)*params(20)*params(3)*T(20)*1/y(46)/y(71);
g1_v(101)=(-(params(3)*y(97)*(1-params(2)+params(6)*(y(89)-y(45))+y(100)/y(99))+params(3)*y(97)*y(99)*(-y(100))/(y(99)*y(99))));
g1_v(102)=(-((1+y(57))*params(3)*y(97)*y(124)));
g1_v(103)=T(12)*params(20)*(y(93)/y(49)-1)*T(19)/y(71);
g1_v(104)=(-(params(3)*y(97)*(1+y(86))));
    if ~isoctave && matlab_ver_less_than('9.8')
        sparse_rowval = double(sparse_rowval);
        sparse_colval = double(sparse_colval);
    end
    g1 = sparse(sparse_rowval, sparse_colval, g1_v, 21, 63);
end
end
